# Campaign Theme Strategy

## 1. Назначение документа
- Систематизировать подход к тематизации кампаний и нарративу для HR-конструктора.
- Описать, как темы влияют на UI конечных пользователей (кадет, офицер) и какие настройки нужны архитектору.
- Определить точки интеграции AI Copilot для генерации нарратива, ассетов и рекомендаций.

## 2. Роли и потребности
- **Архитектор (HR)**: работает в конструкторе, ему нужен удобный выбор темы, нарратива, иконок и звуков без изменения собственного UI.
- **Кадет / конечный пользователь**: видит карту миссий, тестовый режим, дашборды; оформление должно соответствовать выбранной теме.
- **Офицер / куратор**: может видеть кампанию для контроля, оформление также подтягивается из темы.

## 3. Тематические наборы
Каждая тема описывается палитрой, звуком, пакетом иконок, нарративными подсказками и рекомендованными типами миссий.

| Тема | Сеттинг и нарратив | Ключевые элементы UI | Миссии и активности | Аудио/эффекты |
| --- | --- | --- | --- | --- |
| **Галактическая академия** (baseline) | Космическая академия, кадеты проходят обучение, миссии в секторах галактики | Градиенты космоса, неоновая подсветка, голографические панельки | Брифинги командования, космо-симуляция, сбор артефактов | Ambient sci-fi, мягкие сигналы HUD |
| **Киберпанк-хаб** | Ночная мегаструктура, VR-квесты, хакерские испытания | Неоновые рамки, «глитч» эффекты, диагональные бордеры | Декодирование протоколов, взлом терминалов, миссии «в тенях» | Synthwave, дальние сирены |
| **Мифический орден** | Фэнтези-гильдия, послушники получают ранги | Пергаментные фоновые текстуры, псевдорунные иконки | Испытания стихий, охота за артефактами, задания гильдмастера | Оркестровые лупы, флейты |
| **Научная экспедиция** | Исследовательские станции, научные миссии | Светлые панели, инфографика, «dashboard» виджеты | Анализ данных, протоколы наблюдений, лабораторные задания | Лёгкие электронные петли |
| **Корпоративный мегаполис** | Карьерный рост в гипер-корпорации | Стеклянные панели, строгая типографика, KPI-индикаторы | Кейсы «project pitch», коучинг, лидерские миссии | Корпоративный ambient, цифровые notification |
| **Кабинет наставника** | Офлайн-формат, уютная атмосфера наставничества | Тёплые цвета, рукописные акценты, минимализм | Собеседования, домашние задания, чеклисты | Фоновая акустика, звуки страниц |
| **Спортивная лига** | Тренировки и матчи, карьерная лестница через дивизионы | Команды цветов, табло, значки трофеев | Тренировки навыков, челленджи, «финалы» | Энергичные ритмы, фанфары |
| **ESG-миссия** | Экологические и социальные проекты | Природные цвета, иконки растений, инфо-карточки | Волонтёрство, устойчивые инициативы, отчёты | Природные ambient, мягкие колокольчики |
| **Ретро-аркада** | Пиксельный стиль, «уровни» и «жизни» | Пиксельные иконки, сканлинии, жирные контуры | Квесты «Arcade challenge», сбор очков, финальные боссы | Чиптюн, аркадные сигналы |
| **Путешествие во времени** | Прыжки по эпохам, временные «пазлы» | Смешение стилей, эффекты старения/будущего | Поиск артефактов, решение парадоксов, синхронизация эпох | Звуки механизма времени, хронометры |

Дополнительно можно расширять список тем пакетами DLC: «Звёздный патруль», «Медицинская академия», «Инженерный кампус» и т.д.

## 4. Настройки темы в конструкторе
- **Панель кампании** (над ReactFlow): выбор темы, предпросмотр палитры, управление ассетами.
- **Параметры темы**: `primary/secondary` цвета, фон, иллюстрации, иконочный сет, набор звук-эффектов, дополнительные шрифты.
- **Нарратив кампании**: выбор сюжетной арки + генерация описания кампании и «геройской» линии миссий.
- **Ассеты**: загрузка/выбор иконок миссий, фоновых изображений, мелодий; хранение ссылок в карте кампании.
- **Применение**: все настройки сохраняются через `PUT /api/campaigns/[id]` (нужно расширить модель кампании конфигом темы).
- **UI архитектора**: остаётся прагматичным (без смены визуала). Настройки темы выводятся в отдельной панели/модальном окне.

## 5. Применение для конечного пользователя
- **Карта миссий**: узлы (`MissionNode`) используют цветовые токены темы, подменяют иконки, фоновые иллюстрации.
- **Node Library**: превью и описание шаблонов учитывают тему (превью карточек, фильтр по рекомендованным темам).
- **Тестовый режим**: оформляется в стиле темы; статусы и прогресс используют новую палитру, добавляются тематические эффекты.
- **Дашборды**: архитекторы видят «деловой» вид, а кадет/офицер — темизированный (могут сосуществовать два слоя оформления).
- **Аудио**: фоновые петли, короткие сигналы успеха/ошибок, которые включаются в клиентских интерфейсах (опционально).

## 6. AI Copilot: сценарии интеграции
- **Structured Output**: промт возвращает JSON (палитра, иконочный сет, тексты «арок», рекомендации миссий, звуки).
- **Режимы работы**:
  - *Theme-first*: HR выбирает тему → AI генерирует юзер стори, названия миссий, baseline ассеты.
  - *Template-first*: HR берёт карту/коллекцию → AI адаптирует описание миссий под выбранную тему.
  - *Objective-first*: HR вводит цели (например «ускорить адаптацию разработчиков») → AI предлагает тему, набор миссий и связи.
- **ИИ-пилот в UI**: текущая кнопка `ИИ-пилот` вызывает модальный мастер с выбором сценария, превью и подтверждением.
- **Пайплайн**: 
  1. HR задаёт параметры (целевая аудитория, тема, этап, tone of voice).
  2. Запрос к модели (OpenAI/внутренняя) → структурированный ответ.
  3. Сохраняем конфиг кампании (нарратив + тема) и автозаполняем описания миссий.
  4. Предлагаем HR вручную доработать (undo/redo поддерживается редактором).

## 7. Использование ассетов
- **Миссии**: фоновые изображения, пиктограммы, бейджи, которые подтягиваются из выбранного пакета.
- **Библиотека узлов**: карточки шаблонов и коллекций показывают тематические иконки и цветовые индикаторы.
- **Test Mode**: оформленный HUD (рамки, окантовка, индикаторы статусов) + тематический звук при смене статуса.
- **Дашборд кадета/офицера**: обложка кампании, карусели, подсказки в стиле темы.
- **Аудио**: хранение ссылок в настройках кампании или CDN; реализация переключателя «звук включён/выключен».

## 8. Roadmap внедрения
1. **Модель данных**: расширить `Campaign` полем `themeConfig` (JSON) с палитрами, ассетами, аудио.
2. **UI конструктора**: создать «панель кампании» в `MissionFlowEditor` / отдельный модуль для выбора темы.
3. **Стилизация клиента**: прокинуть тему в компоненты кадета/офицера и ReactFlow (для узлов/фоновой сетки).
4. **Интеграция AI Copilot**: разработать промты, схему Structured Output, обработчик, UI «ИИ-пилота».
5. **Ассет-менеджмент**: решить загрузку/хранение иконок и звуков (S3, CDN, локальные пресеты).
6. **Тестирование методологий**: 
   - Template-first: проверить коллекции/карты + адаптацию тем.
   - Theme-first: убедиться, что новый конфиг влияет на UI.
   - Objective-first: отлажить логику AI рекомендаций.
7. **Документация и примеры**: подготовить гайды для HR по выбору тем и работе с AI-подсказками.

## 9. Дополнительные заметки
- Тематизация на UX конечного пользователя — ключевой эффект. HR интерфейс должен оставаться нейтральным.
- ИИ-помощник должен предоставлять версии ассетов/текстов, но окончательное утверждение остаётся за архитектором.
- Стоит предусмотреть fallback: если тема не выбрана, используется baseline (космическая) тема.
- Планировать аналитику: привязка страниц кампаний и конверсий к выбранной теме для последующего A/B анализа.


